require=function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module){module.exports={indexView:function(){var btn=$("#savebtn"),form=($("#username"),btn.parents("form")),errors=$("#errors");btn.on("click",function(){return errors.empty(),$.ajax({type:"POST",url:window.location.href,data:form.serialize(),success:function(data){if(data.message&&errors.append('<div data-alert class="alert-box success">'+data.message+'<a href="#" class="close">&times;</a></div>'),data.error&&errors.append('<div data-alert class="alert-box alert">'+data.error+'<a href="#" class="close">&times;</a></div>'),data.errors){var err="";$.each(data.errors,function(i,error){err+='<div data-alert class="alert-box alert">'+error.msg+'<a href="#" class="close">&times;</a></div>'}),errors.append(err)}}}),!1})}}},{}],2:[function(require,module){module.exports={indexView:function(){var btn=$(".bookmarklet a.fanzybutton");btn.on("click",function(){return!1})}}},{}],3:[function(require,module){module.exports={indexView:function(){$(".friends a.add").on("click",function(ev){ev.preventDefault();var target=$(this),parent=$(this).parents(".row"),username=parent.find(".username").text().trim();return console.log(parent,username),$.ajax({method:"POST",url:$(this).attr("href"),data:{username:username},success:function(){target.hide(),window.location.href="/friends"}}),!1})}}},{}],"1IuhEK":[function(require,module){module.exports={base:require("./base"),account:require("./account"),links:require("./links"),friends:require("./friends")}},{"./account":1,"./base":2,"./friends":3,"./links":5}],5:[function(require,module){function interactivate_tags(){$("#tags").select2({tags:$("#tags").val().split(", "),tokenSeparators:[","," "],minimumInputLength:2,initSelection:function(element,callback){var data=[];$(element.val().split(", ")).each(function(){data.push({id:this,text:this})}),callback(data)},createSearchChoice:function(term,data){return 0===$(data).filter(function(){return 0===this.text.localeCompare(term)}).length?{id:term,text:term}:void 0},ajax:{url:"/tags",dataType:"json",quietMillis:100,data:function(term){return{q:term}},results:function(data){return{results:_.map(data.tags,function(tag){return{id:tag.text,text:tag.text}})}}}})}module.exports={indexView:function(){$("form.new").on("submit",function(){var form=$(this),input=form.find("input").first();return""===$.trim(input.val())?(input.addClass("error"),setTimeout(function(){input.removeClass("error")},2e3),!1):(-1===input.val().indexOf("://")&&input.val("http://"+input.val()),void 0)}),$("ul.links").on("click","a.delete",function(){var sure=$(this).parent().find(".sure").first();return sure.show(),!1}),$("ul.links").on("click","a.sure",function(){var self=$(this),block=$(this).parents("li"),url=block.find(".link .title a").first().attr("href");return self.hide(),$.ajax({method:"DELETE",url:"/delete",data:{url:url},success:function(data,status){return"success"!==status?alert("Could not delete"):(block.remove(),void 0)}}),!1}),$("ul.links").on("click","a.share",function(){var link=$(this),block=$(this).parents("li"),titleBlock=block.find(".title a").first(),url=titleBlock.attr("href"),title=titleBlock.text().trim(),template=require("../templates/sharelink.html");return $.ajax({method:"GET",url:"/friends/followers",success:function(data,status){"success"!==status?alert("Could not get followers"):(block.find("form.followers").remove(),block.append(template({title:title,url:url,followers:data.followers,share_translation:link.data("trans-share")})),block.find("select").select2({width:"element",placeholder:"User"}))}}),!1}),$("ul.links").on("submit","form.suggestform",function(){var form=$(this);return $.ajax({method:"POST",url:$(this).attr("action"),data:$(this).serialize(),success:function(){form.remove()}}),!1})},newView:function(){$("form.new").on("submit",function(){var form=$(this),input=form.find("input").first();-1===input.val().indexOf("://")&&input.val("http://"+input.val())}),interactivate_tags()},importView:function(){$("form.import").on("submit",function(){return $.ajax({method:"POST",url:$(this).attr("action"),data:$(this).serialize(),success:function(data,status){"success"!==status?alert("Some error"):(alert("Good!"),console.log(data))}}),!1})},editView:function(){$("button.cancel_edit").on("click",function(){history.back()}),interactivate_tags()},suggestionsView:function(){$("ul.links").on("click","a.accept",function(ev){ev.preventDefault();var block=$(this).parents("li"),url=block.find(".url").first().text().trim(),title=block.find(".title a").text().trim();return $.ajax({method:"POST",url:"accept",data:{url:url,title:title},success:function(){block.hide()}}),!1}),$("ul.links").on("click","a.reject",function(ev){ev.preventDefault();var block=$(this).parents("li"),url=block.find(".url").first().text().trim();return $.ajax({method:"DELETE",url:"reject",data:{url:url},success:function(){block.hide()}}),!1})}}},{"../templates/sharelink.html":6}],6:[function(require,module,exports){module.exports=function(obj){var __t,__p="";with(Array.prototype.join,obj||{})__p+='<form class="suggestform" method="post" action="/share">\n    <div class="row collapse">\n        <div class="small-10 columns">\n            <input type="hidden" name="url" value="'+(null==(__t=url)?"":_.escape(__t))+'">\n            <input type="hidden" name="title" value="'+(null==(__t=title)?"":_.escape(__t))+'">\n            <select class="" multiple name="id">\n            ',_.each(followers,function(follower){__p+='\n                <option value="'+(null==(__t=follower._id)?"":_.escape(__t))+'">'+(null==(__t=follower.username)?"":_.escape(__t))+"</option>\n            "}),__p+='\n            </select>\n        </div>\n        <div class="small-2 columns">\n            <button class="button prefix" type="submit">'+(null==(__t=share_translation)?"":_.escape(__t))+'</button>\n        </div>\n    </div>\n    <div class="row collapse">\n        <div class="small-10 columns">\n            <input type="text" name="description" placeholder="Message">\n        </div>\n    </div>\n</form>';return __p}},{}],s7n:[function(require,module){module.exports=require("1IuhEK")},{}]},{},["1IuhEK"]);